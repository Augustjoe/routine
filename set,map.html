<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //set 数组去重 set具有元素唯一的特点
        var arr1 = [1,2,3,3,4,5,4,5]
        console.log(new Set(arr1)) //set格式{1, 2, 3, 4, 5}
        var setArr = new Set(arr1);
        console.log([...new Set(arr1)])//array [1,2,3,4,5]

        //set 的相关方法
        // size: 返回实例成员的总数
        console.log(setArr.size) // 5 
        
        // add(value): 添加某个值，返回Set结构本身
        console.log(setArr.add(6))//{1, 2, 3, 4, 5, 6}
        
        // delete(value): 删除某个值，返回一个布尔值，表示删除是否成功。
        console.log(setArr.delete(6)) //true
        
        // has(value): 返回一个布尔值，表示该值是否为Set的成员
        console.log(setArr.has(1)) //true
        
        // keys():返回键名的遍历器。
        console.log(setArr.keys()) // SetIterator {1, 2, 3, 4, 5}

        // values(): 返回键值的遍历器。
        console.log(setArr.values()) //SetIterator {1, 2, 3, 4, 5}

        // entries(): 返回键值对的遍历器。
        console.log(setArr.entries()) // {1 => 1, 2 => 2, 3 => 3, 4 => 4, 5 => 5}

        // forEach(): 使用回调函数遍历每个成员
        setArr.forEach(i=>{console.log(i)}) //1 2 3 4 5

        // clear(): 清除所有成员，没有返回值。
        console.log(setArr.clear()); //undefined
        console.log(setArr) //Set(0) {}

        // WeakSet结构与Set类似，也是有不重复元素的集合。但是它和Set有两个区别：
        // WeakSet对象中只能存放对象引用, 不能存放值, 而Set对象都可以.
        // WeakSet中对象中存储的对象值都是被弱引用的, 如果没有其他的变量或属性引用这个对象值, 则这个对象值会被当成垃圾回收掉. 正因为这样, WeakSet 对象是无法被枚举的, 没有办法拿到它包含的所有元素。

        var ws = new WeakSet();
        var obj = {};
        var foo = {};

        ws.add(window);
        ws.add(obj);

        ws.has(window); // true
        ws.has(foo);    // false, 对象 foo 并没有被添加进 ws 中 

        ws.delete(window); // 从集合中删除 window 对象
        ws.has(window);    // false, window 对象已经被删除了

        // ws.clear(); // 清空整个 WeakSet 对象
        //WeakSet 没有size属性，没有办法遍历它的成员。

        //map
        //Map对象保持键值对。任何值（对象或者原始值）都可以作为一个键或一个值。
        //map和object
        //一个Object的键只能是字符串或者Symbols，但一个Map的键可以是任意值，包括函数、对象、基本类型。
        //Map中的键值是有序的，而添加到对象中的键则不是。因此，当对它进行遍历时，Map对象是按插入的顺序返回键值。
        // Map在涉及频繁增删键值对的场景下会有些性能优势`。

        const set1 = new Set([
            ['A',1],
            ['b',2],
            ['a',1]
        ])
        var map1 = new Map(set1)
        console.log(map1.get('A'),map1.get('b',map1.get('a')))
        console.log(map1.set('c',3))
        console.log(map1.set('a',5))

        // WeakMap
        // WeakMap结构与Map结构类似，也是用于生成键值对的集合。但是有两点区别：

        // WeakMap只接受对象作为键名（null除外），不接受其他类型的值作为键名。
        // WeakMap的键名所指向的对象，不计入垃圾回收机制。和WeakSet相似啦。

        // 属性方法啥的跟Map差不多，就是没有了size和forEach，因为其是不可枚举的。



    </script>
    <div>
        <h2>set，map的数据结构</h2>
    </div>
</body>
</html>